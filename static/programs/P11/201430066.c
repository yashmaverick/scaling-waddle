#include<stdio.h>
int main()
{
	while(1)
	{
		int n;
		scanf("%d",&n);
		if(n==0)
			break;
		long long int a[n],area,maxarea=0,ii=0,i=0,j=0,k=0,leftmin=0;
		while(ii<n)
		{
			scanf("%lld",&a[ii]);
			ii++;
		}
		while(i<n)
		{
			j=i-1;
			if(i==0)
			{
				leftmin=j;
				k=i+1;
				while(k<n)
				{
					if(a[k]<a[i])
						break;
					k++;
				}
				area=a[i]*(k-j-1);
				if(area>maxarea)
					maxarea=area;
			}
			else
			{
				if(a[i]<a[i-1])
				{
					//leftmin=j;
					while(j>=0)
					{
					if(a[j]<a[i])
						break;
					j--;
					}
					leftmin=j;
					k=i+1;
					while(k<n)
					{
						if(a[k]<a[i])
							break;
						k++;
					}
					area=a[i]*(k-leftmin-1);
				}
				if(a[i]>a[i-1])
				{
					leftmin=i-1;
					k=i+1;
					while(k<n)
					{
						if(a[k]<a[i])
							break;
						k++;
					}
					area=a[i]*(k-leftmin-1);
				}
				if(area>maxarea)
					maxarea=area;
			}
			i++;
		}
			printf("%lld\n",maxarea);
	}
	return 0;
}
