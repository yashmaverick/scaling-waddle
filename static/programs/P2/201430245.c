#include<stdio.h>
int main()
{
	int t;
	long long int a[100000],b[100000],c[100000],d[100000],e[100000],p,q,r;
	scanf("%d",&t);
	while(t>0)
	{
		long long int i,j,k,l,count=0;
		scanf("%lld",&p);
		for(i=0;i<p;i++)
		{
			scanf("%lld",&a[i]);
		}
		scanf("%lld",&q);
		for(i=0;i<q;i++)
		{
			scanf("%lld",&b[i]);
			d[i]=0;
		}
		scanf("%lld",&r);
		for(i=0;i<r;i++)
		{
			scanf("%lld",&c[i]);
			e[i]=0;
		}
		for(j=q-1;j>=0;j--)
		{
			 if(j<q-1&&d[j+1]==0)
			{
				break;
			}
			if(j>p-1)
			{
				l=p-1;
			}
			else
			{
				l=j;
			}
			if(j<q-1&&d[j+1]!=0)
			{
				if(d[j+1]==j+2)
				{
					l=j;
				}
				else
				l=d[j+1]-1;
			}
			for(i=l;i>=0;i--)
			{
				if(a[i]<=b[j])
				{
					d[j]=i+1;
					break;
				}
			}
		}
		for(j=r-1;j>=0;j--)
		{
			 if(j<r-1&&e[j+1]==0)
			{
				break;
			}
			if(j>q-1)
			{
				l=q-1;
			}
			else
			{
				l=j;
			}
			if(j<r-1&&e[j+1]!=0)
			{
				if(e[j+1]==j+2)
				{
					l=j;
				}
				else
				l=e[j+1]-1;
			}
			for(i=l;i>=0;i--)
			{
				if(b[i]<=c[j])
				{
					e[j]=i+1;
					break;
				}
			}
		}
		for(j=1;j<q;j++)
		{
			d[j]=d[j]+d[j-1];	
		}
		long long int result=0;
		for(i=0;i<r;i++)
		{
			if(e[i]!=0)
			{
			result=result+d[e[i]-1];
			}
		}
		printf("%lld\n",result);
		t--;
	}
	return 0;
}
