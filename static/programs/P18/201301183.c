#include<stdio.h>
#include<stdlib.h>
int dot=0;
int lev=0;
int fo=0;
struct node{
	int c;
	struct node* next;
};
int count;
struct node* a[1001];
struct node* b[1001];
int d[1001];
int f[1001];
int visit[1001];
void frontdfs(struct node* x)
{
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	struct node* aid;
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	aid=x;
	while(aid!=NULL)
	{
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		if(visit[aid->c]==0)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			visit[aid->c]=1;
			frontdfs(b[aid->c]);
		}
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		aid=aid->next;
	}
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	return;
}
void backdfs(struct node* x)
{
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	struct node* aid;
	aid=x;
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	while(aid!=NULL)
	{
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		if(visit[aid->c]==0)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			count++;
			visit[aid->c]=1;
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			backdfs(a[aid->c]);
		}
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		aid=aid->next;
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	}
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	dot++;
lev++;
fo--;
	lev--;
}
	return;
}
int main()
{
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
	dot++;
lev++;
fo--;
}
	struct node* temp;
	struct node* ans;
	dot++;
lev++;
fo--;
	struct node* help;
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	dot++;
lev++;
fo--;
	fo++;
	lev--;
}
	struct node* var;
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	struct node* fun;
	int m,n,l,p,o,u,v,k,t,r,y,z;
	scanf("%d",&t);
	dot++;
lev++;
fo--;
	for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
dot++;
lev++;
fo--;
	for(k=0;k<t;k++)
	{
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		for(v=0;v<1001;v++)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			d[v]=0;
			b[v]=NULL;dot++;
lev++;
fo--;
		}
		for(v=0;v<1001;v++)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
	dot++;
lev++;
fo--;
}
			f[v]=0;
			a[v]=NULL;
		}
		dot++;
lev++;
fo--;
		scanf("%d",&r);
		for(dot=0;dot<25;dot++)
{
	dot++;
lev++;
fo--;
	fo++;
	lev--;
}
dot++;
lev++;
fo--;
		for(m=1;m<=r;m++)
		{
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			scanf("%d",&n);
			dot++;
lev++;
fo--;
			for(l=0;l<n;l++)
			{
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				scanf("%d",&p);
				temp=malloc(sizeof(struct node));
				temp->c=p;
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				temp->next=NULL;
				dot++;
lev++;
fo--;
				if(d[m]==0)
				{
					for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
					a[m]=temp;
					for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
					d[m]=1;
					dot++;
lev++;
fo--;
				}
				else
				{
					dot++;
lev++;
fo--;
					for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
					temp->next=a[m];
					a[m]=temp;
				}
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				var=malloc(sizeof(struct node));
				var->c=m;
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				var->next=NULL;
				if(f[p]==0)
				{
					dot++;
lev++;
fo--;
					for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
					b[p]=var;
					f[p]=1;
				}
				else
				{
					dot++;
lev++;
fo--;
					for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
					var->next=b[p];
					b[p]=var;
				}
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			}
		}//m realms
		for(u=1;u<=r;u++)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			for(o=0;o<1001;o++)
			{
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				visit[o]=0;
			}
			dot++;
lev++;
fo--;
			visit[u]=1;
			frontdfs(b[u]);
			for(o=1;o<=r;o++)
			{
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
				if(visit[o]==1)
					continue;
				else
					break;
			}
			if(o==(r+1))
			{
				dot++;
lev++;
fo--;
				for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}

				ans=a[u];
				break;
			}
		}
		if(u==r+1)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			printf("0\n");
			dot++;
lev++;
fo--;
			continue;
		}
		for(o=0;o<1001;o++)
		{
			dot++;
lev++;
fo--;
			for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
			visit[o]=0;
		}
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		visit[u]=1;
		count=0;
		backdfs(ans);
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
		printf("%d\n",count+1);
		dot++;
lev++;
fo--;
		for(dot=0;dot<25;dot++)
{
	fo++;
	lev--;
}
	}//testcases
	return 0;
}//main

